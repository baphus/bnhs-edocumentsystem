import{g as e,i as t,D as s,K as l,c as a,j as o,a as n,u as r,k as i,l as d,z as u,n as c,U as m,t as b,E as p,p as x,m as v,v as f,F as h,o as g}from"./vendor-D2a9Ooci.js";import{A as y}from"./ApplicationLogo-8ola3r45.js";import"./_plugin-vue_export-helper-BCo6x5W8.js";const w={class:"min-h-screen bg-gradient-to-br from-bnhs-blue-50 via-white to-bnhs-gold-50"},k={class:"border-b border-gray-200 bg-white/80 backdrop-blur-md"},j={class:"mx-auto max-w-4xl px-4 py-4"},V={class:"flex items-center justify-between"},_={class:"mx-auto max-w-4xl px-4 py-8"},C={class:"mb-6 flex justify-center"},S={class:"inline-flex items-center gap-2 rounded-full bg-bnhs-blue-100 px-4 py-2 text-sm font-medium text-bnhs-blue"},q={class:"mx-auto max-w-md"},E={class:"rounded-2xl bg-white p-8 shadow-xl"},D={class:"text-center"},I={class:"mt-2 text-gray-600"},B={key:0,class:"mt-1 text-sm text-red-600"},M=["disabled"],R={key:0},T={key:1},z={class:"mb-4 rounded-lg bg-green-50 p-3 text-center text-sm text-green-700"},A=["value"],F={key:0,class:"mt-1 text-sm text-red-600"},H=["disabled"],L={key:0},U={key:1},K={class:"mt-4 text-center"},W=["disabled"],Y={key:0},G={key:1},J=e({__name:"EmailVerification",props:{documentType:{}},setup(e){const J=e,N=t(!1),O=t(0);let P=null;const Q=s({email:"",document_type_id:J.documentType.id}),X=s({email:"",otp:"",document_type_id:J.documentType.id}),Z=l(()=>0===O.value),$=()=>{Q.post(route("request.send-otp"),{preserveScroll:!0,onSuccess:()=>{N.value=!0,X.email=Q.email,te()}})},ee=()=>{X.post(route("request.verify-otp"))},te=()=>{O.value=60,P&&clearInterval(P),P=setInterval(()=>{O.value--,O.value<=0&&clearInterval(P)},1e3)},se=()=>{Z.value&&$()},le=e=>{const t=e.target;t.value=t.value.replace(/\D/g,"").slice(0,6),X.otp=t.value};return(t,s)=>(g(),a(h,null,[o(r(i),{title:"Verify Email - Request"}),n("div",w,[n("nav",k,[n("div",j,[n("div",V,[o(r(u),{href:t.route("home"),class:"flex items-center gap-3"},{default:d(()=>[o(y,{class:"h-10 w-auto"}),s[1]||(s[1]=n("span",{class:"font-semibold text-gray-900"},"eDocument Request",-1))]),_:1},8,["href"]),o(r(u),{href:t.route("request.select"),class:"text-sm text-gray-600 hover:text-bnhs-blue"},{default:d(()=>[...s[2]||(s[2]=[c(" ‚Üê Back to Selection ",-1)])]),_:1},8,["href"])])])]),n("div",_,[s[9]||(s[9]=m('<div class="mb-8 flex items-center justify-center"><div class="flex items-center"><div class="flex h-10 w-10 items-center justify-center rounded-full bg-green-500 text-white"><svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg></div><span class="ml-2 text-green-600">Select Document</span></div><div class="mx-4 h-1 w-16 bg-bnhs-blue"></div><div class="flex items-center"><div class="flex h-10 w-10 items-center justify-center rounded-full bg-bnhs-blue text-white"> 2 </div><span class="ml-2 font-medium text-bnhs-blue">Verify Email</span></div><div class="mx-4 h-1 w-16 bg-gray-200"></div><div class="flex items-center"><div class="flex h-10 w-10 items-center justify-center rounded-full bg-gray-200 text-gray-500"> 3 </div><span class="ml-2 text-gray-500">Fill Form</span></div></div>',1)),n("div",C,[n("div",S,[s[3]||(s[3]=n("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),c(" "+b(e.documentType.name),1)])]),n("div",q,[n("div",E,[n("div",D,[s[4]||(s[4]=n("div",{class:"mx-auto flex h-16 w-16 items-center justify-center rounded-full bg-bnhs-blue-100"},[n("svg",{class:"h-8 w-8 text-bnhs-blue",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})])],-1)),s[5]||(s[5]=n("h1",{class:"mt-4 text-2xl font-bold text-gray-900"},"Verify Your Email",-1)),n("p",I,b(N.value?"Enter the 6-digit code sent to your email":"We'll send you a verification code"),1)]),N.value?(g(),a("form",{key:1,onSubmit:p(ee,["prevent"]),class:"mt-8"},[n("div",z,[s[7]||(s[7]=c(" Code sent to ",-1)),n("strong",null,b(r(X).email),1)]),n("div",null,[s[8]||(s[8]=n("label",{for:"otp",class:"block text-sm font-medium text-gray-700"},"Verification Code",-1)),n("input",{id:"otp",type:"text",value:r(X).otp,onInput:le,required:"",maxlength:"6",placeholder:"000000",class:"mt-1 block w-full rounded-lg border-gray-300 text-center text-2xl font-mono tracking-[0.5em] shadow-sm focus:border-bnhs-blue focus:ring-bnhs-blue"},null,40,A),r(X).errors.otp?(g(),a("p",F,b(r(X).errors.otp),1)):v("",!0)]),n("button",{type:"submit",disabled:r(X).processing||6!==r(X).otp.length,class:"mt-6 w-full rounded-xl bg-bnhs-blue py-3 font-semibold text-white transition hover:bg-bnhs-blue-600 disabled:cursor-not-allowed disabled:opacity-50"},[r(X).processing?(g(),a("span",L,"Verifying...")):(g(),a("span",U,"Verify & Continue"))],8,H),n("div",K,[n("button",{type:"button",onClick:se,disabled:!Z.value||r(Q).processing,class:"text-sm text-bnhs-blue hover:underline disabled:cursor-not-allowed disabled:text-gray-400"},[Z.value?(g(),a("span",G,"Didn't receive code? Resend")):(g(),a("span",Y,"Resend code in "+b(O.value)+"s",1))],8,W)])],32)):(g(),a("form",{key:0,onSubmit:p($,["prevent"]),class:"mt-8"},[n("div",null,[s[6]||(s[6]=n("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"Email Address",-1)),x(n("input",{id:"email",type:"email","onUpdate:modelValue":s[0]||(s[0]=e=>r(Q).email=e),required:"",placeholder:"your.email@gmail.com",class:"mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-bnhs-blue focus:ring-bnhs-blue"},null,512),[[f,r(Q).email]]),r(Q).errors.email?(g(),a("p",B,b(r(Q).errors.email),1)):v("",!0)]),n("button",{type:"submit",disabled:r(Q).processing||!r(Q).email,class:"mt-6 w-full rounded-xl bg-bnhs-blue py-3 font-semibold text-white transition hover:bg-bnhs-blue-600 disabled:cursor-not-allowed disabled:opacity-50"},[r(Q).processing?(g(),a("span",R,"Sending...")):(g(),a("span",T,"Send Verification Code"))],8,M)],32))])])])])],64))}});export{J as default};
