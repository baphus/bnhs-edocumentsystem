import{d as e,e as t,J as s,P as l,f as a,g as o,k as r,u as n,i,j as d,E as u,m as c,Z as m,y as b,K as p,q as x,l as v,v as f,F as h,t as g}from"./vendor-Cy1J3uaY.js";import{A as y}from"./ApplicationLogo-DEclvB7y.js";import"./_plugin-vue_export-helper-BCo6x5W8.js";const w={class:"min-h-screen bg-gradient-to-br from-bnhs-blue-50 via-white to-bnhs-gold-50"},k={class:"border-b border-gray-200 bg-white/80 backdrop-blur-md"},j={class:"mx-auto max-w-4xl px-4 py-4"},V={class:"flex items-center justify-between"},_={class:"mx-auto max-w-4xl px-4 py-8"},q={class:"mb-6 flex justify-center"},C={class:"inline-flex items-center gap-2 rounded-full bg-bnhs-blue-100 px-4 py-2 text-sm font-medium text-bnhs-blue"},S={class:"mx-auto max-w-md"},E={class:"rounded-2xl bg-white p-8 shadow-xl"},B={class:"text-center"},D={class:"mt-2 text-gray-600"},I={key:0,class:"mt-1 text-sm text-red-600"},M=["disabled"],R={key:0},T={key:1},A={class:"mb-4 rounded-lg bg-green-50 p-3 text-center text-sm text-green-700"},F=["value"],H={key:0,class:"mt-1 text-sm text-red-600"},L=["disabled"],z={key:0},G={key:1},J={class:"mt-4 text-center"},K=["disabled"],P={key:0},U={key:1},W=e({__name:"EmailVerification",props:{documentType:{}},setup(e){const W=e,Y=t(!1),Z=t(0);let N=null;const O=s({email:"",document_type_id:W.documentType.id}),Q=s({email:"",otp:"",document_type_id:W.documentType.id}),X=l(()=>0===Z.value),$=()=>{O.post(route("request.send-otp"),{preserveScroll:!0,onSuccess:()=>{Y.value=!0,Q.email=O.email,te()}})},ee=()=>{Q.post(route("request.verify-otp"))},te=()=>{Z.value=60,N&&clearInterval(N),N=setInterval(()=>{Z.value--,Z.value<=0&&clearInterval(N)},1e3)},se=()=>{X.value&&$()},le=e=>{const t=e.target;t.value=t.value.replace(/\D/g,"").slice(0,6),Q.otp=t.value};return(t,s)=>(g(),a(h,null,[o(n(i),{title:"Verify Email - Request"}),r("div",w,[r("nav",k,[r("div",j,[r("div",V,[o(n(u),{href:t.route("home"),class:"flex items-center gap-3"},{default:d(()=>[o(y,{class:"h-10 w-auto"}),s[1]||(s[1]=r("span",{class:"font-semibold text-gray-900"},"eDocument Request",-1))]),_:1},8,["href"]),o(n(u),{href:t.route("request.select"),class:"text-sm text-gray-600 hover:text-bnhs-blue"},{default:d(()=>[...s[2]||(s[2]=[c(" ‚Üê Back to Selection ",-1)])]),_:1},8,["href"])])])]),r("div",_,[s[9]||(s[9]=m('<div class="mb-8 flex items-center justify-center"><div class="flex items-center"><div class="flex h-10 w-10 items-center justify-center rounded-full bg-green-500 text-white"><svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg></div><span class="ml-2 text-green-600">Select Document</span></div><div class="mx-4 h-1 w-16 bg-bnhs-blue"></div><div class="flex items-center"><div class="flex h-10 w-10 items-center justify-center rounded-full bg-bnhs-blue text-white"> 2 </div><span class="ml-2 font-medium text-bnhs-blue">Verify Email</span></div><div class="mx-4 h-1 w-16 bg-gray-200"></div><div class="flex items-center"><div class="flex h-10 w-10 items-center justify-center rounded-full bg-gray-200 text-gray-500"> 3 </div><span class="ml-2 text-gray-500">Fill Form</span></div></div>',1)),r("div",q,[r("div",C,[s[3]||(s[3]=r("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),c(" "+b(e.documentType.name),1)])]),r("div",S,[r("div",E,[r("div",B,[s[4]||(s[4]=r("div",{class:"mx-auto flex h-16 w-16 items-center justify-center rounded-full bg-bnhs-blue-100"},[r("svg",{class:"h-8 w-8 text-bnhs-blue",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})])],-1)),s[5]||(s[5]=r("h1",{class:"mt-4 text-2xl font-bold text-gray-900"},"Verify Your Email",-1)),r("p",D,b(Y.value?"Enter the 6-digit code sent to your email":"We'll send you a verification code"),1)]),Y.value?(g(),a("form",{key:1,onSubmit:p(ee,["prevent"]),class:"mt-8"},[r("div",A,[s[7]||(s[7]=c(" Code sent to ",-1)),r("strong",null,b(n(Q).email),1)]),r("div",null,[s[8]||(s[8]=r("label",{for:"otp",class:"block text-sm font-medium text-gray-700"},"Verification Code",-1)),r("input",{id:"otp",type:"text",value:n(Q).otp,onInput:le,required:"",maxlength:"6",placeholder:"000000",class:"mt-1 block w-full rounded-lg border-gray-300 text-center text-2xl font-mono tracking-[0.5em] shadow-sm focus:border-bnhs-blue focus:ring-bnhs-blue"},null,40,F),n(Q).errors.otp?(g(),a("p",H,b(n(Q).errors.otp),1)):v("",!0)]),r("button",{type:"submit",disabled:n(Q).processing||6!==n(Q).otp.length,class:"mt-6 w-full rounded-xl bg-bnhs-blue py-3 font-semibold text-white transition hover:bg-bnhs-blue-600 disabled:cursor-not-allowed disabled:opacity-50"},[n(Q).processing?(g(),a("span",z,"Verifying...")):(g(),a("span",G,"Verify & Continue"))],8,L),r("div",J,[r("button",{type:"button",onClick:se,disabled:!X.value||n(O).processing,class:"text-sm text-bnhs-blue hover:underline disabled:cursor-not-allowed disabled:text-gray-400"},[X.value?(g(),a("span",U,"Didn't receive code? Resend")):(g(),a("span",P,"Resend code in "+b(Z.value)+"s",1))],8,K)])],32)):(g(),a("form",{key:0,onSubmit:p($,["prevent"]),class:"mt-8"},[r("div",null,[s[6]||(s[6]=r("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"Email Address",-1)),x(r("input",{id:"email",type:"email","onUpdate:modelValue":s[0]||(s[0]=e=>n(O).email=e),required:"",placeholder:"your.email@gmail.com",class:"mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-bnhs-blue focus:ring-bnhs-blue"},null,512),[[f,n(O).email]]),n(O).errors.email?(g(),a("p",I,b(n(O).errors.email),1)):v("",!0)]),r("button",{type:"submit",disabled:n(O).processing||!n(O).email,class:"mt-6 w-full rounded-xl bg-bnhs-blue py-3 font-semibold text-white transition hover:bg-bnhs-blue-600 disabled:cursor-not-allowed disabled:opacity-50"},[n(O).processing?(g(),a("span",R,"Sending...")):(g(),a("span",T,"Send Verification Code"))],8,M)],32))])])])])],64))}});export{W as default};
