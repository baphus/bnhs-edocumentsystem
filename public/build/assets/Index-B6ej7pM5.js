import{g as e,i as t,w as s,I as l,B as a,c as i,j as r,u as o,k as n,l as d,a as u,x as c,n as m,m as g,o as x,F as p,q as f,t as y,y as b,z as v}from"./vendor-D2a9Ooci.js";import{_ as h}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-BxbCq07Z.js";import{_}from"./TextInput.vue_vue_type_script_setup_true_lang-BSw9Jizz.js";import{_ as w}from"./SecondaryButton.vue_vue_type_script_setup_true_lang-CUhaWGbd.js";import"./ApplicationLogo-8ola3r45.js";import"./_plugin-vue_export-helper-BCo6x5W8.js";const k={class:"py-12"},j={class:"mx-auto max-w-7xl sm:px-6 lg:px-8"},L={class:"mb-4 flex gap-3 border-b border-gray-200 pb-2"},S={class:"mb-6 rounded-lg bg-white p-4 shadow sm:p-6"},T={class:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4"},V={class:"mt-4 flex justify-end"},C={class:"overflow-hidden bg-white shadow sm:rounded-lg"},q={class:"overflow-x-auto"},A={class:"min-w-full divide-y divide-gray-200"},H={class:"divide-y divide-gray-200 bg-white"},M={class:"whitespace-nowrap px-6 py-4 text-sm text-gray-500"},D=["title"],I={class:"px-6 py-4 text-sm text-gray-900"},R={class:"whitespace-nowrap px-6 py-4"},U={class:"px-6 py-4 text-sm text-gray-500"},z=["title"],E={key:0},F={class:"border-t border-gray-200 bg-white px-4 py-3 sm:px-6"},N={class:"flex items-center justify-between"},B={class:"flex flex-1 justify-between sm:hidden"},P={key:1},G={class:"hidden sm:flex sm:flex-1 sm:items-center sm:justify-between"},J={class:"text-sm text-gray-700"},K={class:"font-medium"},O={class:"font-medium"},$={class:"font-medium"},Q={class:"isolate inline-flex -space-x-px rounded-md shadow-sm","aria-label":"Pagination"},W=["innerHTML"],X=e({__name:"Index",props:{logs:{},filters:{}},setup(e){const X=e,Y=t({search:X.filters.search||"",date_from:X.filters.date_from||"",date_to:X.filters.date_to||"",source:X.filters.source||"Request"});s(Y,l(e=>{a.get(route("admin.logs.index"),e,{preserveState:!0,replace:!0})},300),{deep:!0});const Z=e=>{const t=e.toLowerCase();return t.includes("create")||t.includes("submitted")?"text-green-700 ring-green-600/20 bg-green-50":t.includes("update")||t.includes("process")?"text-blue-700 ring-blue-600/20 bg-blue-50":t.includes("delete")||t.includes("fail")?"text-red-700 ring-red-600/20 bg-red-50":t.includes("login")?"text-indigo-700 ring-indigo-600/20 bg-indigo-50":"text-gray-600 ring-gray-500/10 bg-gray-50"};return(t,s)=>(x(),i(p,null,[r(o(n),{title:"Activity Timeline"}),r(h,null,{header:d(()=>[...s[6]||(s[6]=[u("h2",{class:"text-xl font-semibold leading-tight text-gray-800"},"Activity Timeline",-1)])]),default:d(()=>[u("div",k,[u("div",j,[s[19]||(s[19]=u("div",{class:"md:flex md:items-center md:justify-between mb-6"},[u("div",{class:"min-w-0 flex-1"},[u("h2",{class:"text-2xl font-bold leading-7 text-gray-900 sm:truncate sm:text-3xl sm:tracking-tight"}," Activity Timeline "),u("p",{class:"mt-1 text-sm text-gray-500"}," Comprehensive history of request and email activity. ")])],-1)),u("div",L,[u("button",{type:"button",class:c(["rounded-md px-4 py-2 text-sm font-semibold","Request"===Y.value.source?"bg-bnhs-blue text-white shadow":"text-gray-600 hover:bg-gray-100"]),onClick:s[0]||(s[0]=e=>Y.value.source="Request")}," Request Logs ",2),u("button",{type:"button",class:c(["rounded-md px-4 py-2 text-sm font-semibold","Email"===Y.value.source?"bg-bnhs-blue text-white shadow":"text-gray-600 hover:bg-gray-100"]),onClick:s[1]||(s[1]=e=>Y.value.source="Email")}," Email Logs ",2)]),u("div",S,[u("div",T,[u("div",null,[s[7]||(s[7]=u("label",{for:"search",class:"block text-sm font-medium text-gray-700"},"Search",-1)),r(_,{id:"search",modelValue:Y.value.search,"onUpdate:modelValue":s[2]||(s[2]=e=>Y.value.search=e),type:"text",class:"mt-1 block w-full",placeholder:"Search description, subject..."},null,8,["modelValue"])]),u("div",null,[s[8]||(s[8]=u("label",{for:"date_from",class:"block text-sm font-medium text-gray-700"},"From Date",-1)),r(_,{id:"date_from",modelValue:Y.value.date_from,"onUpdate:modelValue":s[3]||(s[3]=e=>Y.value.date_from=e),type:"date",class:"mt-1 block w-full"},null,8,["modelValue"])]),u("div",null,[s[9]||(s[9]=u("label",{for:"date_to",class:"block text-sm font-medium text-gray-700"},"To Date",-1)),r(_,{id:"date_to",modelValue:Y.value.date_to,"onUpdate:modelValue":s[4]||(s[4]=e=>Y.value.date_to=e),type:"date",class:"mt-1 block w-full"},null,8,["modelValue"])])]),u("div",V,[r(w,{onClick:s[5]||(s[5]=e=>Y.value={search:"",date_from:"",date_to:"",source:Y.value.source}),class:"text-xs"},{default:d(()=>[...s[10]||(s[10]=[m(" Clear Filters ",-1)])]),_:1})])]),u("div",C,[u("div",q,[u("table",A,[s[12]||(s[12]=u("thead",{class:"bg-gray-50"},[u("tr",null,[u("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"}," Timestamp "),u("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"}," Subject "),u("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"}," Causer "),u("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"}," Action "),u("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"}," Description ")])],-1)),u("tbody",H,[(x(!0),i(p,null,f(e.logs.data,e=>{return x(),i("tr",{key:`${e.id}`,class:"hover:bg-gray-50"},[u("td",M,y((t=e.created_at,new Date(t).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}))),1),u("td",{class:"px-6 py-4 text-sm text-gray-900 max-w-xs truncate",title:e.subject},y(e.subject||"-"),9,D),u("td",I,y(e.causer||"System"),1),u("td",R,[u("span",{class:c(["inline-flex items-center rounded-md px-2 py-1 text-xs font-medium ring-1 ring-inset",Z(e.action)])},y(e.action),3)]),u("td",U,[u("div",null,y(e.description),1),e.details?(x(),i("div",{key:0,class:"mt-1 text-xs text-gray-400 truncate max-w-xs",title:"string"==typeof e.details?e.details:JSON.stringify(e.details)},y("string"==typeof e.details?e.details:"Has details..."),9,z)):g("",!0)])]);var t}),128)),0===e.logs.data.length?(x(),i("tr",E,[...s[11]||(s[11]=[u("td",{colspan:"5",class:"px-6 py-12 text-center text-gray-500"}," No activity logs found matching your criteria. ",-1)])])):g("",!0)])])]),u("div",F,[u("div",N,[u("div",B,[e.logs.meta?.links[0]?.url&&!e.logs.meta.links[0].active?(x(),b(o(v),{key:0,href:e.logs.meta.links[0].url,class:"relative inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50"},{default:d(()=>[...s[13]||(s[13]=[m(" Previous ",-1)])]),_:1},8,["href"])):(x(),i("div",P)),e.logs.meta?.links[e.logs.meta.links.length-1]?.url&&!e.logs.meta.links[e.logs.meta.links.length-1].active?(x(),b(o(v),{key:2,href:e.logs.meta.links[e.logs.meta.links.length-1].url,class:"relative ml-3 inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50"},{default:d(()=>[...s[14]||(s[14]=[m(" Next ",-1)])]),_:1},8,["href"])):g("",!0)]),u("div",G,[u("div",null,[u("p",J,[s[15]||(s[15]=m(" Showing ",-1)),u("span",K,y(e.logs.meta?.from||0),1),s[16]||(s[16]=m(" to ",-1)),u("span",O,y(e.logs.meta?.to||0),1),s[17]||(s[17]=m(" of ",-1)),u("span",$,y(e.logs.meta?.total||0),1),s[18]||(s[18]=m(" results ",-1))])]),u("div",null,[u("nav",Q,[(x(!0),i(p,null,f(e.logs.links,(t,s)=>(x(),i(p,{key:s},[t.url?(x(),b(o(v),{key:0,href:t.url,class:c(["relative inline-flex items-center px-4 py-2 text-sm font-semibold ring-1 ring-inset ring-gray-300 focus:z-20 focus:outline-offset-0",[t.active?"z-10 bg-bnhs-blue text-white focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-bnhs-blue":"text-gray-900 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:outline-offset-0",0===s?"rounded-l-md":"",s===e.logs.links.length-1?"rounded-r-md":""]]),innerHTML:t.label},null,8,["href","class","innerHTML"])):(x(),i("span",{key:1,class:"relative inline-flex items-center px-4 py-2 text-sm font-semibold text-gray-700 ring-1 ring-inset ring-gray-300 focus:outline-offset-0",innerHTML:t.label},null,8,W))],64))),128))])])])])])])])])]),_:1})],64))}});export{X as default};
