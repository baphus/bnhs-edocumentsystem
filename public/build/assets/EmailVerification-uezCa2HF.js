import{d as e,O as t,P as s,e as l,J as a,f as o,g as r,k as n,u as i,i as d,j as u,E as c,m,y as b,K as p,q as x,l as h,v as g,F as v,t as y}from"./vendor-Cy1J3uaY.js";import{A as f}from"./ApplicationLogo-DEclvB7y.js";import"./_plugin-vue_export-helper-BCo6x5W8.js";const w={class:"min-h-screen bg-gradient-to-br from-bnhs-blue-50 via-white to-bnhs-gold-50"},k={class:"border-b border-gray-200 bg-white/80 backdrop-blur-md"},V={class:"mx-auto max-w-4xl px-4 py-4"},j={class:"flex items-center justify-between"},q={class:"mx-auto max-w-4xl px-4 py-8"},D={class:"mx-auto max-w-md"},S={class:"rounded-2xl bg-white p-8 shadow-xl"},_={class:"text-center"},A={class:"mt-2 text-gray-600"},C={key:0,class:"mt-1 text-sm text-red-600"},E=["disabled"],I={key:0},H={key:1},M={key:0,class:"mb-4 rounded-lg bg-green-50 p-3 text-center text-sm text-green-700"},R={class:"mb-4 rounded-lg bg-green-50 p-3 text-center text-sm text-green-700"},B=["value"],L={key:0,class:"mt-1 text-sm text-red-600"},O=["disabled"],z={key:0},F={key:1},G={class:"mt-4 text-center"},J=["disabled"],K={key:0},P={key:1},U=e({__name:"EmailVerification",setup(e){const U=t(),Y=s(()=>U.props.flash),N=l(!1),Q=l(0);let T=null;const W=a({email:""}),X=a({email:"",otp:""}),Z=s(()=>0===Q.value),$=()=>{W.post(route("user.dashboard.send-otp"),{preserveScroll:!0,onSuccess:()=>{N.value=!0,X.email=W.email,te()}})},ee=()=>{X.post(route("user.dashboard.verify-otp"))},te=()=>{Q.value=60,T&&clearInterval(T),T=setInterval(()=>{Q.value--,Q.value<=0&&clearInterval(T)},1e3)},se=()=>{Z.value&&$()},le=e=>{const t=e.target;t.value=t.value.replace(/\D/g,"").slice(0,6),X.otp=t.value};return(e,t)=>(y(),o(v,null,[r(i(d),{title:"Verify Email - My Dashboard"}),n("div",w,[n("nav",k,[n("div",V,[n("div",j,[r(i(c),{href:e.route("home"),class:"flex items-center gap-3"},{default:u(()=>[r(f,{class:"h-10 w-auto"}),t[1]||(t[1]=n("span",{class:"font-semibold text-gray-900"},"eDocument Request",-1))]),_:1},8,["href"]),r(i(c),{href:e.route("home"),class:"text-sm text-gray-600 hover:text-bnhs-blue"},{default:u(()=>[...t[2]||(t[2]=[m(" â† Back to Home ",-1)])]),_:1},8,["href"])])])]),n("div",q,[n("div",D,[n("div",S,[n("div",_,[t[3]||(t[3]=n("div",{class:"mx-auto flex h-16 w-16 items-center justify-center rounded-full bg-bnhs-blue-100"},[n("svg",{class:"h-8 w-8 text-bnhs-blue",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})])],-1)),t[4]||(t[4]=n("h1",{class:"mt-4 text-2xl font-bold text-gray-900"},"Access Your Dashboard",-1)),n("p",A,b(N.value?"Enter the 6-digit code sent to your email":"Verify your email to view your document requests"),1)]),N.value?(y(),o("form",{key:1,onSubmit:p(ee,["prevent"]),class:"mt-8"},[Y.value?.success?(y(),o("div",M,b(Y.value.success),1)):h("",!0),n("div",R,[t[6]||(t[6]=m(" Code sent to ",-1)),n("strong",null,b(i(X).email),1)]),n("div",null,[t[7]||(t[7]=n("label",{for:"otp",class:"block text-sm font-medium text-gray-700"},"Verification Code",-1)),n("input",{id:"otp",type:"text",value:i(X).otp,onInput:le,required:"",maxlength:"6",placeholder:"000000",class:"mt-1 block w-full rounded-lg border-gray-300 text-center text-2xl font-mono tracking-[0.5em] shadow-sm focus:border-bnhs-blue focus:ring-bnhs-blue"},null,40,B),i(X).errors.otp?(y(),o("p",L,b(i(X).errors.otp),1)):h("",!0)]),n("button",{type:"submit",disabled:i(X).processing||6!==i(X).otp.length,class:"mt-6 w-full rounded-xl bg-bnhs-blue py-3 font-semibold text-white transition hover:bg-bnhs-blue-600 disabled:cursor-not-allowed disabled:opacity-50"},[i(X).processing?(y(),o("span",z,"Verifying...")):(y(),o("span",F,"Verify & Access Dashboard"))],8,O),n("div",G,[n("button",{type:"button",onClick:se,disabled:!Z.value||i(W).processing,class:"text-sm text-bnhs-blue hover:underline disabled:cursor-not-allowed disabled:text-gray-400"},[Z.value?(y(),o("span",P,"Didn't receive code? Resend")):(y(),o("span",K,"Resend code in "+b(Q.value)+"s",1))],8,J)])],32)):(y(),o("form",{key:0,onSubmit:p($,["prevent"]),class:"mt-8"},[n("div",null,[t[5]||(t[5]=n("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"Email Address",-1)),x(n("input",{id:"email",type:"email","onUpdate:modelValue":t[0]||(t[0]=e=>i(W).email=e),required:"",placeholder:"your.email@gmail.com",class:"mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-bnhs-blue focus:ring-bnhs-blue"},null,512),[[g,i(W).email]]),i(W).errors.email?(y(),o("p",C,b(i(W).errors.email),1)):h("",!0)]),n("button",{type:"submit",disabled:i(W).processing||!i(W).email,class:"mt-6 w-full rounded-xl bg-bnhs-blue py-3 font-semibold text-white transition hover:bg-bnhs-blue-600 disabled:cursor-not-allowed disabled:opacity-50"},[i(W).processing?(y(),o("span",I,"Sending...")):(y(),o("span",H,"Send Verification Code"))],8,E)],32))]),t[8]||(t[8]=n("div",{class:"mt-6 text-center text-sm text-gray-600"},[n("p",null,"Only emails with existing document requests can access the dashboard.")],-1))])])])],64))}});export{U as default};
