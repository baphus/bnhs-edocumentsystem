import{d as e,e as t,J as s,f as a,g as r,u as l,i as d,j as o,k as n,B as i,y as u,A as c,R as m,t as g,F as x,x as p,m as b,l as y,T as h,K as v,q as f,z as k,v as w,H as q}from"./vendor-Cy1J3uaY.js";import{_}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-DjBzGfo9.js";import"./ApplicationLogo-DEclvB7y.js";import"./_plugin-vue_export-helper-BCo6x5W8.js";const j={class:"flex items-center gap-4"},R={class:"py-8"},C={class:"mx-auto max-w-4xl px-4 sm:px-6 lg:px-8"},S={class:"rounded-xl bg-white p-6 shadow"},L={class:"flex items-start justify-between"},M={class:"text-2xl font-bold text-gray-900"},A={class:"mt-6"},B={class:"flex items-center justify-between mb-2"},P={class:"text-sm font-medium text-gray-600"},z={class:"w-full bg-gray-200 rounded-full h-2 mb-4"},D={class:"flex justify-between items-center"},H={key:0,class:"h-3 w-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},V={key:1,class:"h-3 w-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},U={key:2,class:"text-xs font-medium"},N={class:"mt-6 flex gap-3"},I={class:"mt-6 grid gap-6 lg:grid-cols-2"},T={class:"rounded-xl bg-white p-6 shadow"},F={class:"mt-4 space-y-4"},$={class:"font-medium text-gray-900"},E={class:"font-mono font-medium text-gray-900"},G={class:"font-medium text-gray-900"},J={class:"grid grid-cols-2 gap-4"},K={class:"font-medium text-gray-900"},Y={class:"font-medium text-gray-900"},O={key:0},Q={class:"font-medium text-gray-900"},W={class:"font-medium text-gray-900"},X={class:"space-y-6"},Z={class:"rounded-xl bg-white p-6 shadow"},ee={class:"mt-4 space-y-4"},te={class:"font-medium text-gray-900"},se={class:"font-medium text-gray-900"},ae={class:"grid grid-cols-2 gap-4"},re={class:"font-medium text-gray-900"},le={class:"font-medium text-gray-900"},de={key:0,class:"rounded-xl bg-white p-6 shadow"},oe={class:"mt-4"},ne=["src","alt"],ie={key:1,class:"rounded-xl bg-white p-6 shadow"},ue={class:"mt-4"},ce=["src"],me={key:2,class:"rounded-xl bg-bnhs-blue-50 p-6 shadow"},ge={class:"mt-2 text-gray-700"},xe={class:"mt-6 rounded-xl bg-white p-6 shadow"},pe={class:"mt-4 space-y-4"},be={class:"flex-1"},ye={class:"flex items-center gap-2"},he={class:"font-medium text-gray-900"},ve={key:0,class:"text-xs text-gray-500"},fe={key:0,class:"mt-1 text-sm text-gray-600"},ke={class:"mt-1 text-xs text-gray-400"},we={key:0},qe={key:0,class:"text-center text-gray-500"},_e={key:0,class:"fixed inset-0 z-50 overflow-y-auto"},je={class:"flex min-h-screen items-center justify-center p-4"},Re={class:"relative w-full max-w-md rounded-xl bg-white p-6 shadow-xl"},Ce=["value"],Se={class:"mt-6 flex justify-end gap-3"},Le=["disabled"],Me={key:0,class:"fixed inset-0 z-50 overflow-y-auto"},Ae={class:"flex min-h-screen items-center justify-center p-4"},Be={class:"relative w-full max-w-md rounded-xl bg-white p-6 shadow-xl"},Pe={class:"mt-6 flex justify-end gap-3"},ze=["disabled"],De=e({__name:"Show",props:{request:{}},setup(e){const De=e,He=t(!1),Ve=t(!1),Ue=["Pending","Verified","Processing","Ready","Completed","Rejected"],Ne=s({status:De.request.status}),Ie=s({admin_remarks:De.request.admin_remarks||""}),Te=()=>{Ne.patch(route("admin.requests.update",De.request.id),{onSuccess:()=>{He.value=!1}})},Fe=()=>{Ie.patch(route("admin.requests.update",De.request.id),{onSuccess:()=>{Ve.value=!1}})},$e=e=>{const t={Pending:"bg-yellow-100 text-yellow-800 border-yellow-200",Verified:"bg-blue-100 text-blue-800 border-blue-200",Processing:"bg-purple-100 text-purple-800 border-purple-200",Ready:"bg-green-100 text-green-800 border-green-200",Completed:"bg-gray-100 text-gray-800 border-gray-200",Rejected:"bg-red-100 text-red-800 border-red-200"};return t[e]||t.Pending},Ee=[{key:"Pending",label:"Submitted",description:"Request submitted and under review"},{key:"Verified",label:"Verified",description:"Information verified and approved"},{key:"Processing",label:"Processing",description:"Document is being prepared"},{key:"Ready",label:"Ready",description:"Document is ready for pickup"},{key:"Completed",label:"Completed",description:"Request completed successfully"}],Ge=e=>{const t=Ee.findIndex(t=>t.key===e);return-1===t?0:(t+1)/Ee.length*100},Je=e=>{const t=Ee.findIndex(t=>t.key===e);return-1===t?0:t},Ke=(e,t)=>e<=Je(t),Ye=(e,t)=>e===Je(t),Oe=e=>new Date(e).toLocaleDateString("en-PH",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"});return(t,s)=>(g(),a(x,null,[r(l(d),{title:`Request ${e.request.tracking_id}`},null,8,["title"]),r(_,null,{header:o(()=>[n("div",j,[n("button",{onClick:s[0]||(s[0]=e=>l(q).visit(t.route("admin.requests.index"))),type:"button",class:"text-gray-500 hover:text-gray-700"},[...s[9]||(s[9]=[n("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])]),s[10]||(s[10]=n("h2",{class:"text-xl font-semibold leading-tight text-gray-800"}," Request Details ",-1))])]),default:o(()=>[n("div",R,[n("div",C,[n("div",S,[n("div",L,[n("div",null,[s[11]||(s[11]=n("p",{class:"text-sm text-gray-500"},"Tracking ID",-1)),n("p",M,u(e.request.tracking_id),1)]),n("span",{class:c(["rounded-full border px-4 py-2 text-sm font-medium",$e(e.request.status)])},u(e.request.status),3)]),n("div",A,[n("div",B,[s[12]||(s[12]=n("h3",{class:"text-sm font-semibold text-gray-900"},"Progress",-1)),n("span",P,u(Math.round(Ge(e.request.status)))+"%",1)]),n("div",z,[n("div",{class:"bg-gradient-to-r from-bnhs-blue to-bnhs-blue-600 h-2 rounded-full transition-all duration-500 ease-out",style:m({width:Ge(e.request.status)+"%"})},null,4)]),n("div",D,[(g(),a(x,null,p(Ee,(t,r)=>n("div",{key:t.key,class:"flex flex-col items-center flex-1"},[n("div",{class:c(["flex h-6 w-6 items-center justify-center rounded-full border transition-all duration-300 mb-1",Ke(r,e.request.status)&&"Rejected"!==e.request.status?"bg-green-500 border-green-500 text-white":Ye(r,e.request.status)&&"Rejected"!==e.request.status?"bg-bnhs-blue border-bnhs-blue text-white":"Rejected"===e.request.status?"bg-red-500 border-red-500 text-white":"bg-gray-100 border-gray-300 text-gray-500"])},[Ke(r,e.request.status)&&"Rejected"!==e.request.status?(g(),a("svg",H,[...s[13]||(s[13]=[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M5 13l4 4L19 7"},null,-1)])])):"Rejected"===e.request.status?(g(),a("svg",V,[...s[14]||(s[14]=[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M6 18L18 6M6 6l12 12"},null,-1)])])):(g(),a("span",U,u(r+1),1))],2),n("span",{class:c(["text-xs font-medium text-center",Ke(r,e.request.status)&&"Rejected"!==e.request.status?"text-green-600":Ye(r,e.request.status)&&"Rejected"!==e.request.status?"text-bnhs-blue":"Rejected"===e.request.status?"text-red-600":"text-gray-500"])},u(t.label),3)])),64))])]),n("div",N,[n("button",{onClick:s[1]||(s[1]=e=>He.value=!0),class:"flex items-center gap-2 rounded-lg bg-bnhs-blue px-4 py-2 text-sm font-medium text-white hover:bg-bnhs-blue-600"},[...s[15]||(s[15]=[n("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),b(" Update Status ",-1)])]),n("button",{onClick:s[2]||(s[2]=e=>Ve.value=!0),class:"flex items-center gap-2 rounded-lg border border-gray-300 px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50"},[s[16]||(s[16]=n("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)),b(" "+u(e.request.admin_remarks?"Edit Remarks":"Add Remarks"),1)])])]),n("div",I,[n("div",T,[s[24]||(s[24]=n("h3",{class:"flex items-center gap-2 font-semibold text-gray-900"},[n("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})]),b(" Student Information ")],-1)),n("dl",F,[n("div",null,[s[17]||(s[17]=n("dt",{class:"text-sm text-gray-500"},"Full Name",-1)),n("dd",$,u(e.request.first_name)+" "+u(e.request.middle_name)+" "+u(e.request.last_name),1)]),n("div",null,[s[18]||(s[18]=n("dt",{class:"text-sm text-gray-500"},"LRN",-1)),n("dd",E,u(e.request.lrn),1)]),n("div",null,[s[19]||(s[19]=n("dt",{class:"text-sm text-gray-500"},"Email",-1)),n("dd",G,u(e.request.student_email),1)]),n("div",J,[n("div",null,[s[20]||(s[20]=n("dt",{class:"text-sm text-gray-500"},"Grade Level",-1)),n("dd",K,u(e.request.grade_level),1)]),n("div",null,[s[21]||(s[21]=n("dt",{class:"text-sm text-gray-500"},"Section",-1)),n("dd",Y,u(e.request.section||"N/A"),1)])]),e.request.track_strand?(g(),a("div",O,[s[22]||(s[22]=n("dt",{class:"text-sm text-gray-500"},"Track/Strand",-1)),n("dd",Q,u(e.request.track_strand),1)])):y("",!0),n("div",null,[s[23]||(s[23]=n("dt",{class:"text-sm text-gray-500"},"School Year Last Attended",-1)),n("dd",W,u(e.request.school_year_last_attended),1)])])]),n("div",X,[n("div",Z,[s[29]||(s[29]=n("h3",{class:"flex items-center gap-2 font-semibold text-gray-900"},[n("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})]),b(" Document Details ")],-1)),n("dl",ee,[n("div",null,[s[25]||(s[25]=n("dt",{class:"text-sm text-gray-500"},"Document Type",-1)),n("dd",te,u(e.request.document_type?.name),1)]),n("div",null,[s[26]||(s[26]=n("dt",{class:"text-sm text-gray-500"},"Purpose",-1)),n("dd",se,u(e.request.purpose||"Not specified"),1)]),n("div",ae,[n("div",null,[s[27]||(s[27]=n("dt",{class:"text-sm text-gray-500"},"Date Submitted",-1)),n("dd",re,u(Oe(e.request.created_at)),1)]),n("div",null,[s[28]||(s[28]=n("dt",{class:"text-sm text-gray-500"},"Last Updated",-1)),n("dd",le,u(Oe(e.request.updated_at)),1)])])])]),e.request.photo_path?(g(),a("div",de,[s[30]||(s[30]=n("h3",{class:"flex items-center gap-2 font-semibold text-gray-900"},[n("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})]),b(" 2x2 Photo ")],-1)),n("div",oe,[n("img",{src:`/storage/${e.request.photo_path}`,alt:`${e.request.first_name}'s photo`,class:"h-32 w-32 rounded-lg border object-cover shadow"},null,8,ne)])])):y("",!0),e.request.signature?(g(),a("div",ie,[s[31]||(s[31]=n("h3",{class:"flex items-center gap-2 font-semibold text-gray-900"},[n("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})]),b(" Digital Signature ")],-1)),n("div",ue,[n("img",{src:e.request.signature,alt:"Student's signature",class:"max-h-24 max-w-full rounded-lg border border-gray-200 object-contain p-2"},null,8,ce)])])):y("",!0),e.request.admin_remarks?(g(),a("div",me,[s[32]||(s[32]=n("h3",{class:"flex items-center gap-2 font-semibold text-bnhs-blue"},[n("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"})]),b(" Admin Remarks ")],-1)),n("p",ge,u(e.request.admin_remarks),1)])):y("",!0)])]),n("div",xe,[s[33]||(s[33]=n("h3",{class:"flex items-center gap-2 font-semibold text-gray-900"},[n("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})]),b(" Activity Log ")],-1)),n("div",pe,[(g(!0),a(x,null,p(e.request.request_logs,e=>{return g(),a("div",{key:e.id,class:"flex items-start gap-4 border-l-2 border-gray-200 pl-4"},[n("div",be,[n("div",ye,[n("p",he,u((t=e.action,{status_change:"Status Updated",remark_updated:"Remarks Updated",request_created:"Request Created"}[t]||t.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(" "))),1),e.old_value&&e.new_value&&"status_change"===e.action?(g(),a("span",ve," ("+u(e.old_value)+" → "+u(e.new_value)+") ",1)):y("",!0)]),e.description?(g(),a("p",fe,u(e.description),1)):y("",!0),n("p",ke,[b(u(Oe(e.created_at))+" ",1),e.user?(g(),a("span",we," · by "+u(e.user.name),1)):y("",!0)])])]);var t}),128)),e.request.request_logs?.length?y("",!0):(g(),a("div",qe," No activity logged yet "))])])])]),(g(),i(h,{to:"body"},[He.value?(g(),a("div",_e,[n("div",je,[n("div",{class:"fixed inset-0 bg-black/50",onClick:s[3]||(s[3]=e=>He.value=!1)}),n("div",Re,[s[35]||(s[35]=n("h3",{class:"text-lg font-semibold text-gray-900"},"Update Status",-1)),n("form",{onSubmit:v(Te,["prevent"]),class:"mt-4"},[n("div",null,[s[34]||(s[34]=n("label",{for:"status",class:"block text-sm font-medium text-gray-700"},"New Status",-1)),f(n("select",{id:"status","onUpdate:modelValue":s[4]||(s[4]=e=>l(Ne).status=e),class:"mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-bnhs-blue focus:ring-bnhs-blue"},[(g(),a(x,null,p(Ue,e=>n("option",{key:e,value:e},u(e),9,Ce)),64))],512),[[k,l(Ne).status]])]),n("div",Se,[n("button",{type:"button",onClick:s[5]||(s[5]=e=>He.value=!1),class:"rounded-lg border border-gray-300 px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50"}," Cancel "),n("button",{type:"submit",disabled:l(Ne).processing,class:"rounded-lg bg-bnhs-blue px-4 py-2 text-sm font-medium text-white hover:bg-bnhs-blue-600 disabled:opacity-50"}," Update Status ",8,Le)])],32)])])])):y("",!0)])),(g(),i(h,{to:"body"},[Ve.value?(g(),a("div",Me,[n("div",Ae,[n("div",{class:"fixed inset-0 bg-black/50",onClick:s[6]||(s[6]=e=>Ve.value=!1)}),n("div",Be,[s[37]||(s[37]=n("h3",{class:"text-lg font-semibold text-gray-900"},"Admin Remarks",-1)),n("form",{onSubmit:v(Fe,["prevent"]),class:"mt-4"},[n("div",null,[s[36]||(s[36]=n("label",{for:"remarks",class:"block text-sm font-medium text-gray-700"},"Remarks",-1)),f(n("textarea",{id:"remarks","onUpdate:modelValue":s[7]||(s[7]=e=>l(Ie).admin_remarks=e),rows:"4",placeholder:"Add remarks visible to the student...",class:"mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-bnhs-blue focus:ring-bnhs-blue"},null,512),[[w,l(Ie).admin_remarks]])]),n("div",Pe,[n("button",{type:"button",onClick:s[8]||(s[8]=e=>Ve.value=!1),class:"rounded-lg border border-gray-300 px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50"}," Cancel "),n("button",{type:"submit",disabled:l(Ie).processing,class:"rounded-lg bg-bnhs-blue px-4 py-2 text-sm font-medium text-white hover:bg-bnhs-blue-600 disabled:opacity-50"}," Save Remarks ",8,ze)])],32)])])])):y("",!0)]))]),_:1})],64))}});export{De as default};
